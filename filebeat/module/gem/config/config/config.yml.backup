type: log
paths:
{{ range $i, $path := .paths }}
 - {{$path}}
{{ end }}

harvester_buffer_size: 100000 

close_eof: true
#clean_inactive: 3s
clean_removed: true

exclude_files: [".gz$"]

#json:
#  keys_under_root: true 
#  overwrite_keys: true
#  add_error_key: true
#  document_id: true

multiline:
  pattern: '^{'
  negate: true
  match: after
  flush_pattern: '^}'

  
processors:
- script:
    lang: javascript
    id: gem_config
    source: >
      function process(event) {
          var gemConfigMessage = event.Get("event.message");
          if (gemConfigMessage !== null) {
              gemConfigMessage = gemConfigMessage
          }
          event.Delete("event.message");
          event.Put("event.message", gemConfigMessage);
      }
